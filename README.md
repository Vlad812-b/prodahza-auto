# AsiaDrive — учебный сервис импорта автомобилей

Учебное полнофункциональное приложение на Flask для демонстрации микро‑CRM по импорту автомобилей из Кореи и Китая. Показывает каталог машин, позволяет пользователям оставлять заявки, а администраторам и модераторам — управлять карточками и отслеживанием доставки. Все данные сохраняются в SQLite.

## Возможности
- Публичный каталог с фильтрами по стране и поиском по бренду/модели.
- Карточки авто с актуальным статусом доставки (берётся из таблицы `tracking_events`).
- Регистрация/логин пользователей (роли: `admin`, `moderator`, `customer`), защита форм сессиями и хэшированием паролей.
- Создание заявок на покупку (только для авторизованных клиентов), хранение в таблице `leads`.
- Админ-панель заявок с привязкой к аккаунтам, отображением контактов и роли.
- Управление статусами доставки: форма добавления событий, публичная таймлайн‑страница.
- Модераторы могут добавлять автомобили и обновлять статусы; админы дополнительно видят заявки.

## Стек
- Python 3.11+, Flask, Jinja2.
- SQLite (встроенный `sqlite3`) без внешнего сервера БД.
- HTML/CSS (адаптивный интерфейс без JS-фреймворков).
- Werkzeug для хэширования паролей.

## Быстрый старт
```bash
cd C:\Kozevnikov_Rabota
python -m venv venv
venv\Scripts\activate
pip install flask
python init_db.py   # создаёт/заполняет cars.db
python app.py
```
Сайт откроется на `http://localhost:5001/`.

### Тестовые учётные записи
| Роль       | Email                   | Пароль   | Права                                   |
|------------|-------------------------|----------|-----------------------------------------|
| Admin      | demo@asiadrive.com      | demo1234 | Заявки, добавление авто, статусы        |
| Moderator  | moderator@asiadrive.com | mod1234  | Добавление авто, статусы                |
| Customer   | зарегистрируй вручную   | —        | Просмотр каталога, оформление заявки    |

### Основные маршруты
- `/` — публичный каталог, фильтры, форма заявки (для авторизованных).
- `/tracking` — общедоступный таймлайн статусов доставки.
- `/add` — добавление автомобиля (admin/moderator).
- `/tracking/manage` — создание событий отслеживания (admin/moderator).
- `/leads` — список заявок клиентов (только admin).
- `/auth/register`, `/auth/login`, `/auth/logout` — аутентификация.

## Структура проекта
```
app.py             # Flask-приложение и маршруты
init_db.py         # создание схемы и тестовых данных
templates/         # Jinja2-шаблоны (каталог, формы, трекинг, auth)
static/style.css   # стили интерфейса
cars.db            # SQLite база (генерируется)
```

## Дальнейшие улучшения
- Добавить разграничение админ/модератор по отдельным страницам и метрики.
- Подключить отправку email/Telegram-уведомлений при новых заявках.
- Настроить деплой (Render/Fly/Heroku) и миграции (например, Alembic).
- Вынести конфиг (SECRET_KEY, БД) в `.env`, использовать gunicorn/Waitress.

Проект рассчитан на учебные цели и демонстрацию full-stack навыков (ORM/SQL, серверная логика, ролевая модель, клиентский UX).

